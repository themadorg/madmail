## ============================================================================
## Madmail Server — Configuration Reference
## ============================================================================
##
## This file documents EVERY configurable directive in Maddy with inline
## comments. It serves as both a working config and a complete reference.
##
## See also:
##   - docs/chatmail/certificate.md  — TLS modes (autocert, acme, file, self_signed)
##   - docs/chatmail/commands.md     — CLI reference (install, uninstall, etc.)
##   - docs/chatmail/turn.md         — TURN/STUN video call relay
##   - https://maddy.email           — upstream maddy documentation


## ============================================================================
## 1. GLOBAL VARIABLES & SETTINGS
## ============================================================================

## $(hostname) — The MX hostname of this server. Used in SMTP EHLO/HELO,
## TLS certificate matching, and DKIM signing. Must match your DNS MX record.
## For IP-only setups, use the IP address directly.
$(hostname) = mail.example.org

## $(primary_domain) — The primary email domain this server handles.
## Emails to user@<primary_domain> are accepted and stored locally.
## For IP-only setups, wrap in brackets: [203.0.113.50]
$(primary_domain) = example.org

## $(local_domains) — Space-separated list of all domains this server
## accepts mail for. Must include $(primary_domain).
## Example with multiple domains: $(primary_domain) extra.org another.org
$(local_domains) = $(primary_domain)

## $(public_ip) — The server's public IPv4 address. Used by:
##   - Chatmail QR code generation
##   - TURN server relay (video calls)
##   - Iroh relay discovery URL
$(public_ip) = 127.0.0.1

## state_dir — Directory for all persistent state: databases, DKIM keys,
## certificate cache (autocert), message buffers, MTA-STS cache, etc.
## Owned by the maddy user. Default: /var/lib/maddy
state_dir /var/lib/maddy

## runtime_dir — Directory for runtime files (PID, sockets).
## Default: /run/maddy
runtime_dir /run/maddy


## ============================================================================
## 2. TLS CONFIGURATION
## ============================================================================
##
## Maddy supports 4 TLS modes. Choose ONE of the following blocks:
##
## Mode 1: autocert (RECOMMENDED for production)
## ─────────────────────────────────────────────────
## Automatic Let's Encrypt via HTTP-01 challenge.
## Requires port 80 open. No DNS provider API needed.
## Certs are cached in cache_dir and auto-renewed.
##
# tls {
#     loader autocert {
#         hostname mail.example.org      # Must match $(hostname)
#         email admin@example.org        # Let's Encrypt registration email
#         cache_dir /var/lib/maddy/autocert  # Certificate cache (mode 700)
#         agreed                         # Accept Let's Encrypt ToS
#         # listen :80                   # HTTP-01 challenge listener (default: :80)
#         # extra_names other.example.org  # Additional hostnames for the cert
#     }
# }
##
## Mode 2: acme (DNS-01 challenge)
## ─────────────────────────────────────────────────
## Automatic Let's Encrypt via DNS-01 challenge.
## Requires DNS provider API token. Port 80 NOT needed.
## Use when behind a firewall or CDN that blocks port 80.
##
# tls {
#     loader acme {
#         hostname mail.example.org
#         email admin@example.org
#         agreed
#         challenge dns-01
#         store_path /var/lib/maddy/acme
#         dns cloudflare {              # DNS provider: cloudflare, gandi,
#             api_token "your-token"    # digitalocean, vultr, hetzner, route53
#         }
#     }
# }
##
## Mode 3: file (user-provided certificates)
## ─────────────────────────────────────────────────
## Use your own cert files from certbot, a CA, or any source.
## Set up a cron/hook to reload maddy after renewal.
##
# tls file /etc/letsencrypt/live/mail.example.org/fullchain.pem /etc/letsencrypt/live/mail.example.org/privkey.pem
##
## Mode 4: self_signed (testing / IP-only)
## ─────────────────────────────────────────────────
## Auto-generated self-signed certs. Clients will show warnings.
## Good for testing, development, or IP-based setups.
## Certs are stored in state_dir/certs/ and reused on restart.
##
tls file /var/lib/maddy/certs/fullchain.pem /var/lib/maddy/certs/privkey.pem

## Note: TLS can also be configured per-endpoint (SMTP, IMAP, chatmail)
## using an inline 'tls' directive. If not set in the endpoint, the
## global TLS config is inherited (inheritGlobal: true for IMAP and chatmail).


## ============================================================================
## 3. LOGGING & DEBUGGING
## ============================================================================

## debug — Enable debug-level logging globally. Inherited by all modules
## unless they override it. Values: yes / no
# debug yes

## log — Where to send log output.
##   stderr  — standard error (visible in journalctl)
##   off     — disable logging entirely (privacy mode)
##   syslog  — send to syslog
log stderr


## ============================================================================
## 4. AUTHENTICATION DATABASE
## ============================================================================
##
## auth.pass_table stores hashed passwords for user authentication.
## Used by SMTP Submission, IMAP, and the chatmail registration API.
## Credentials managed via: maddy creds create/list/remove
##
## Supported drivers: sqlite3 (default), postgres

auth.pass_table local_authdb {
    ## auto_create — Automatically create database entries when a user
    ## authenticates for the first time. Required for chatmail auto-registration.
    ## Values: yes / no
    auto_create yes

    ## table — The backend table for password storage.
    ## For SQLite (default, file-based):
    table sql_table {
        driver sqlite3
        dsn credentials.db       # Relative to state_dir
        table_name passwords
    }

    ## For PostgreSQL:
    # table sql_table {
    #     driver postgres
    #     dsn "host=127.0.0.1 port=5432 user=maddy password=secret dbname=maddy sslmode=disable"
    #     table_name passwords
    # }

    ## settings_table — Optional separate table for per-user settings
    ## (used for admin API settings storage, Shadowsocks overrides, etc.)
    ## If omitted, settings are stored in the same DB as passwords.
    # settings_table sql_table {
    #     driver sqlite3
    #     dsn credentials.db
    #     table_name settings
    # }
}


## ============================================================================
## 5. MAIL STORAGE (IMAP)
## ============================================================================
##
## storage.imapsql stores all mailbox indexes, metadata, and message content.
## Used by the IMAP endpoint for mailbox access and by SMTP/Submission
## for local message delivery.
##
## Manage with: maddy imap-acct create/list/remove, maddy imap-mbox list

storage.imapsql local_mailboxes {
    ## auto_create — Automatically create mailbox when first message is
    ## delivered. Required for chatmail. Values: yes / no
    auto_create yes

    ## driver / dsn — Database backend (sqlite3 or postgres)
    driver sqlite3
    dsn imapsql.db               # Relative to state_dir

    ## retention — How long to keep messages before auto-deletion.
    ## Set to 0 to disable. Format: Go duration (24h, 7d, 168h, etc.)
    ## Chatmail servers typically use 24h to minimize storage.
    retention 24h

    ## default_quota — Maximum storage per user mailbox.
    ## Format: size with unit (1G, 500M, etc.)
    default_quota 1G

    ## appendlimit — Maximum size of a single message that can be appended.
    ## Format: size with unit (32M, 64M, etc.)
    appendlimit 32M

    ## For PostgreSQL:
    # driver postgres
    # dsn "host=127.0.0.1 port=5432 user=maddy password=secret dbname=maddy sslmode=disable"
}


## ============================================================================
## 6. SMTP MESSAGE ROUTING
## ============================================================================

## hostname — EHLO/HELO hostname for SMTP sessions (inherits global)
hostname $(hostname)

## table.chain local_rewrites — Address rewriting rules applied to
## incoming recipients before delivery. Supports:
##   - Plus addressing: user+tag@domain → user@domain
##   - Static aliases: postmaster → postmaster@domain
##   - File-based aliases: arbitrary mappings from /etc/maddy/aliases
table.chain local_rewrites {
    optional_step regexp "(.+)\+(.+)@(.+)" "$1@$3"
    optional_step static {
        entry postmaster postmaster@$(primary_domain)
    }
    optional_step file /etc/maddy/aliases
}

## msgpipeline local_routing — Routes messages to local mailboxes.
## All local recipients go through address rewriting before delivery.
msgpipeline local_routing {
    ## Custom routing for sub-domains (e.g., mailing lists):
    # destination lists.example.org {
    #     deliver_to lmtp tcp://127.0.0.1:8024
    # }

    destination postmaster $(local_domains) {
        modify {
            replace_rcpt &local_rewrites
        }
        deliver_to &local_mailboxes
    }

    default_destination {
        reject 550 5.1.1 "User doesn't exist"
    }
}


## ============================================================================
## 7. INBOUND SMTP (Port 25)
## ============================================================================
##
## Receives mail from the internet. Only accepts mail for local domains.
## Outbound mail must go through the Submission endpoint (port 587/465).

smtp tcp://0.0.0.0:25 {
    ## limits — Rate limiting and connection concurrency controls
    limits {
        ## all rate <n> <period> — Max messages per time period across all connections
        all rate 20 1s
        ## all concurrency <n> — Max simultaneous SMTP connections
        all concurrency 200
    }

    ## max_message_size — Maximum allowed message size. Format: size with unit
    max_message_size 32M

    ## write_timeout — Timeout for writing responses. Default: 1m
    # write_timeout 1m

    ## read_timeout — Timeout for reading client commands. Default: 10m
    # read_timeout 10m

    ## max_recipients — Maximum recipients per message. Default: 20000
    # max_recipients 20000

    ## max_received — Maximum Received headers (loop detection). Default: 50
    # max_received 50

    ## smtp_max_line_length — Maximum SMTP command line length. Default: 4000
    # smtp_max_line_length 4000

    ## defer_sender_reject — Defer sender rejection to RCPT TO stage.
    ## Required by RFC 5321 for some edge cases. Default: yes
    # defer_sender_reject yes

    ## dmarc — Enable DMARC policy enforcement. Values: yes / no
    dmarc yes

    ## check — Security checks for incoming mail
    check {
        ## require_tls — Reject mail from servers that don't use STARTTLS
        require_tls
        ## require_mx_record — Reject mail from domains without MX records
        require_mx_record
        ## dkim — Verify DKIM signatures
        dkim
        ## spf — Check SPF records
        spf
    }

    ## Reject outbound mail attempts through port 25 (must use Submission)
    source $(local_domains) {
        reject 501 5.1.8 "Use Submission for outgoing SMTP"
    }
    default_source {
        destination postmaster $(local_domains) {
            deliver_to &local_routing
        }
        default_destination {
            reject 550 5.1.1 "User doesn't exist"
        }
    }
}


## ============================================================================
## 8. OUTBOUND SUBMISSION (Port 465 TLS / Port 587 STARTTLS)
## ============================================================================
##
## Authenticated endpoint for sending mail. Requires user login.
## Signs outbound mail with DKIM.

submission tls://0.0.0.0:465 tcp://0.0.0.0:587 {
    limits {
        all rate 50 1s
    }

    max_message_size 32M

    ## auth — Reference to the authentication database
    auth &local_authdb

    ## insecure_auth — Allow plaintext authentication without TLS.
    ## DANGEROUS: passwords sent in cleartext. Only use for testing.
    ## Values: yes / no
    insecure_auth no

    source $(local_domains) {
        check {
            require_tls
            ## authorize_sender — Verify the From address matches the authenticated user
            authorize_sender {
                prepare_email &local_rewrites
                user_to_email identity
            }

            ## pgp_encryption — Require PGP encryption for outgoing messages.
            ## Used by chatmail servers to ensure all mail is encrypted.
            ## Uncomment to enable:
            # pgp_encryption {
            #     require_encryption yes       # Reject unencrypted outbound mail
            #     allow_secure_join yes         # Allow SecureJoin messages (unencrypted)
            #     # passthrough_senders a@b.c   # Exempt specific senders
            #     # passthrough_recipients x@y.z # Exempt specific recipients
            # }
        }

        destination postmaster $(local_domains) {
            deliver_to &local_routing
        }
        default_destination {
            modify {
                ## dkim — Sign outbound messages with DKIM
                ## Format: dkim <signing_domain> <scope_domains> <selector>
                ## Key file: state_dir/dkim_keys/<domain>_<selector>.key
                dkim $(primary_domain) $(local_domains) default
            }
            deliver_to &remote_queue
        }
    }
    default_source {
        reject 501 5.1.8 "Non-local sender domain"
    }
}


## ============================================================================
## 9. OUTBOUND DELIVERY & QUEUE
## ============================================================================
##
## target.remote handles actual delivery to remote SMTP servers.
## target.queue manages the retry queue for failed deliveries.

target.remote outbound_delivery {
    limits {
        ## Per-destination rate limiting (per recipient domain)
        destination rate 20 1s
        destination concurrency 10
    }

    ## mx_auth — MX server authentication / TLS policy
    mx_auth {
        ## dane — Use DANE (TLSA records) for MX authentication
        dane
        ## mtasts — Use MTA-STS policy for TLS enforcement
        mtasts {
            cache fs
            fs_dir mtasts_cache/
        }
        ## local_policy — Fallback TLS policy when DANE/MTA-STS unavailable
        local_policy {
            ## min_tls_level: none | encrypted
            min_tls_level encrypted
            ## min_mx_level: none | mtasts | dane
            min_mx_level none
        }
    }
}

target.queue remote_queue {
    target &outbound_delivery

    ## autogenerated_msg_domain — Domain used for auto-generated message IDs
    ## (e.g., bounce notifications)
    autogenerated_msg_domain $(primary_domain)

    ## bounce — Where to deliver DSN (Delivery Status Notification) messages
    bounce {
        destination postmaster $(local_domains) {
            deliver_to &local_routing
        }
        default_destination {
            reject 550 5.0.0 "Refusing to send DSNs to non-local addresses"
        }
    }
}


## ============================================================================
## 10. IMAP ENDPOINT (Port 993 TLS / Port 143 STARTTLS)
## ============================================================================
##
## Provides IMAP access to mailboxes. Also announces TURN server
## credentials and Iroh relay URL via IMAP METADATA extension.

imap tls://0.0.0.0:993 tcp://0.0.0.0:143 {
    ## auth — Reference to authentication database
    auth &local_authdb

    ## storage — Reference to mail storage backend
    storage &local_mailboxes

    ## insecure_auth — Allow plaintext auth without TLS. DANGEROUS.
    insecure_auth no

    ## io_debug — Log all IMAP protocol I/O. WARNING: leaks passwords!
    # io_debug yes

    ## io_errors — Log I/O errors
    # io_errors yes

    ## sasl_login — Enable the legacy LOGIN SASL mechanism
    # sasl_login yes

    ## proxy_protocol — Accept HAProxy PROXY protocol headers
    # proxy_protocol {
    #     trust 10.0.0.0/8
    # }

    ## storage_map — Custom mapping from auth username to storage account name
    # storage_map <table_module>

    ## storage_map_normalize — How to normalize usernames for storage lookup
    ## Values: auto (default), precis, casefold, none
    # storage_map_normalize auto

    ## ─── TURN Server Discovery (Video Calls) ───
    ## These settings are advertised to clients via IMAP METADATA.
    ## Delta Chat reads them to discover the TURN server for video calls.

    ## turn_enable — Advertise TURN credentials via IMAP METADATA
    ## Values: yes / no
    # turn_enable yes

    ## turn_server — TURN server hostname or IP
    # turn_server 203.0.113.50

    ## turn_port — TURN server port. Default: 3478
    # turn_port 3478

    ## turn_secret — Shared secret for TURN credential generation (HMAC-SHA1)
    ## Must match the 'secret' in the turn {} block.
    # turn_secret your-shared-secret

    ## turn_ttl — Credential validity duration in seconds. Default: 86400 (24h)
    # turn_ttl 86400

    ## turn_prefer_tls — Prefer TURNS (TLS) over plain TURN. Default: yes
    # turn_prefer_tls yes

    ## ─── Iroh Relay Discovery (Webxdc Realtime) ───
    ## Iroh relay URL is advertised via IMAP METADATA for Webxdc apps.

    ## iroh_relay_url — URL of the Iroh relay sidecar (if enabled)
    # iroh_relay_url http://203.0.113.50:3340
}


## ============================================================================
## 11. TURN SERVER (Video Calls)
## ============================================================================
##
## Built-in TURN/STUN relay for Delta Chat video calls.
## Listens on both UDP and TCP for maximum compatibility.
## Authentication uses time-limited HMAC-SHA1 credentials.
##
## The TURN server must be reachable from the internet.
## Firewall: open UDP+TCP on the TURN port AND UDP 49152-65535 (relay range).

# turn udp://0.0.0.0:3478 tcp://0.0.0.0:3478 {
#     ## realm — Authentication realm. Typically the server's public IP.
#     realm 203.0.113.50
#
#     ## secret — Shared secret for HMAC-SHA1 credential generation.
#     ## Must match turn_secret in the IMAP block.
#     secret your-shared-secret
#
#     ## relay_ip — Public IP for TURN relay allocations.
#     ## If not set, uses the listen address (may be 0.0.0.0 which won't work).
#     relay_ip 203.0.113.50
#
#     ## tls — Optional TLS config for TURNS (TLS-over-TCP)
#     # tls file /path/to/cert.pem /path/to/key.pem
#
#     ## debug — Enable TURN debug logging. Values: yes / no
#     debug no
# }


## ============================================================================
## 12. CHATMAIL ENDPOINT (User Registration & Services)
## ============================================================================
##
## The chatmail endpoint provides:
##   - Automatic user registration (/new)
##   - DCQR invite links (/qr)
##   - Binary self-update download (/madmail)
##   - Email reception via HTTP (/mxdeliv)
##   - DKIM public key publishing (/.well-known/_domainkey/)
##   - Admin REST API (/api/admin or custom path)
##   - ALPN-multiplexed SMTP+IMAP+HTTPS on port 443
##   - Shadowsocks proxy for restricted networks
##   - Contact sharing database
##
## Multiple instances can be created (e.g., HTTP on :80 and HTTPS on :443).
## In 'autocert' TLS mode, port 80 is owned by the ACME challenge handler,
## so only the HTTPS instance should be configured.

## ─── HTTP Endpoint (Port 80) ───
## Skip this when using autocert (port 80 is used for ACME challenges).
# chatmail tcp://0.0.0.0:80 {
#     # ... (same directives as HTTPS below, minus tls/alpn)
# }

## ─── HTTPS Endpoint (Port 443) ───
# chatmail tls://0.0.0.0:443 {
#
#     ## ─── Required Settings ───
#
#     ## mail_domain — Domain for email addresses (user@<mail_domain>)
#     mail_domain $(primary_domain)
#
#     ## mx_domain — MX hostname for email delivery
#     mx_domain $(primary_domain)
#
#     ## web_domain — Domain used in QR codes and web URLs
#     web_domain $(primary_domain)
#
#     ## auth_db — Reference to authentication database (by instance name)
#     auth_db local_authdb
#
#     ## storage — Reference to mail storage (by instance name)
#     storage local_mailboxes
#
#     ## ─── Registration Settings ───
#
#     ## username_length — Length of auto-generated usernames. Default: 8
#     # username_length 8
#
#     ## password_length — Length of auto-generated passwords. Default: 16
#     # password_length 16
#
#     ## ─── Security & TLS ───
#
#     ## public_ip — Server's public IP for QR codes and TURN discovery
#     # public_ip 203.0.113.50
#
#     ## turn_off_tls — Disable strict TLS verification for clients.
#     ## Use this with self-signed certs so clients can connect.
#     ## Values: yes / no
#     # turn_off_tls no
#
#     ## tls — Per-endpoint TLS config (overrides global).
#     ## Omit to inherit the global TLS config (recommended for autocert).
#     # tls file /path/to/fullchain.pem /path/to/privkey.pem
#
#     ## ─── ALPN Multiplexing (Port 443 only) ───
#     ## Multiplex SMTP Submission and IMAP over the same TLS port using ALPN.
#     ## Set to the instance name of the SMTP submission / IMAP module.
#
#     ## alpn_smtp — ALPN protocol name for SMTP Submission multiplexing
#     # alpn_smtp submission
#
#     ## alpn_imap — ALPN protocol name for IMAP multiplexing
#     # alpn_imap imap
#
#     ## ─── Contact Sharing ───
#
#     ## enable_contact_sharing — Enable DeltaChat contact broadcast feature.
#     ## Values: yes / no
#     # enable_contact_sharing yes
#
#     ## sharing_driver — Database driver for contacts. Default: sqlite3
#     # sharing_driver sqlite3
#
#     ## sharing_dsn — Database connection string for contact sharing.
#     ## SQLite default: state_dir/sharing.db
#     # sharing_dsn /var/lib/maddy/sharing.db
#     ## Postgres example:
#     # sharing_driver postgres
#     # sharing_dsn "host=127.0.0.1 port=5432 user=maddy dbname=maddy"
#
#     ## ─── Shadowsocks Proxy ───
#     ## Built-in Shadowsocks server for tunneling mail traffic through
#     ## restrictive firewalls. Clients discover the SS URL via /new response.
#
#     ## ss_addr — Shadowsocks listen address. Empty = disabled.
#     # ss_addr "0.0.0.0:8388"
#
#     ## ss_password — Shadowsocks password. Auto-generated if not set.
#     # ss_password "your-password"
#
#     ## ss_cipher — Shadowsocks cipher. Default: aes-128-gcm
#     ## Supported: aes-128-gcm, aes-256-gcm, chacha20-ietf-poly1305
#     # ss_cipher "aes-128-gcm"
#
#     ## ss_allowed_ports — Ports accessible through the Shadowsocks proxy.
#     ## Default: 25, 143, 465, 587, 993, 3478, 5349 (mail + TURN ports)
#     ## Security: Only whitelisted ports are forwarded. All other
#     ## traffic is rejected at the SOCKS5 layer.
#     # ss_allowed_ports 25 143 465 587 993 3478
#
#     ## ─── Admin API ───
#     ## REST API for remote server management. Token auto-generated on
#     ## first startup and saved to state_dir/admin_token.
#     ## View token: maddy admin-token
#
#     ## admin_token — Set a custom token, or "disabled" to turn off.
#     ## Default: auto-generated on first start
#     # admin_token disabled
#     # admin_token your-custom-token
#
#     ## admin_path — URL path for the admin API. Default: /api/admin
#     ## Can be changed to an obscure path for security-through-obscurity.
#     # admin_path /api/admin
#
#     ## ─── Other ───
#
#     ## max_message_size — Max email size accepted via HTTP /mxdeliv endpoint.
#     ## Default: 32M
#     # max_message_size 32M
#
#     ## www_dir — Custom directory for static web files (landing page, etc.)
#     ## Default: embedded www/ files (RTL Farsi landing page)
#     # www_dir /var/lib/maddy/www
#
#     ## debug — Enable debug logging for this endpoint. Values: yes / no
#     # debug no
# }


## ============================================================================
## 13. OPENMETRICS / PROMETHEUS ENDPOINT
## ============================================================================
##
## Exposes Prometheus-compatible metrics at /metrics.
## No TLS support (bind to localhost or use a reverse proxy).

# openmetrics tcp://127.0.0.1:9100 {
#     ## debug — Enable debug logging. Values: yes / no
#     # debug no
# }


## ============================================================================
## 14. DOVECOT SASL DAEMON
## ============================================================================
##
## Provides a Dovecot-compatible SASL authentication daemon.
## Useful when running Dovecot alongside maddy for IMAP.
## Listens on a Unix socket or TCP.

# dovecot_sasld unix:///var/run/maddy/dovecot-auth {
#     ## auth — Authentication provider reference
#     auth &local_authdb
#
#     ## sasl_login — Enable legacy LOGIN mechanism
#     # sasl_login yes
# }


## ============================================================================
## 15. RUNTIME CONFIGURATION (Admin API Hot-Reload)
## ============================================================================
##
## The following settings can be changed at runtime via the Admin API
## without editing this file. Changes are stored in the settings database
## and applied on restart. The config file is patched automatically.
##
## Hot-reloadable settings:
##   __SMTP_PORT__          — SMTP listen port
##   __SUBMISSION_PORT__    — Submission listen port
##   __IMAP_PORT__          — IMAP listen port
##   __TURN_PORT__          — TURN listen port
##   __TURN_SECRET__        — TURN shared secret
##   __TURN_REALM__         — TURN realm
##   __TURN_RELAY_IP__      — TURN relay IP
##   __TURN_TTL__           — TURN credential TTL
##   __SS_PORT__            — Shadowsocks port
##   __SS_PASSWORD__        — Shadowsocks password
##   __SS_CIPHER__          — Shadowsocks cipher
##   __HTTP_PORT__          — Chatmail HTTP port
##   __HTTPS_PORT__         — Chatmail HTTPS port
##   __IROH_PORT__          — Iroh relay port
##   __SS_ENABLED__         — Shadowsocks on/off
##   __IROH_ENABLED__       — Iroh relay on/off
##   __LOG_DISABLED__       — Log on/off
##   __ADMIN_PATH__         — Admin API URL path
##   __IMAP_LOCAL_ONLY__    — Bind IMAP to 127.0.0.1 only
##   __TURN_LOCAL_ONLY__    — Bind TURN to 127.0.0.1 only
