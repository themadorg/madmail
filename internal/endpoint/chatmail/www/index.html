<!DOCTYPE html>
<html dir="rtl" lang="fa">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
    <title>ุณุฑูุฑ ฺุช {{.MailDomain | cleanDomain}}</title>
    <link rel="stylesheet" href="./main.css">
    <script src="./main.js"></script>
    <link rel="icon" href="/logo.svg">
</head>

<body>
    <div class="container">
        <ul id="menu">
            <li><a href="/" class="active">ุงุตู</a></li>
            <li><a href="/share">ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ</a></li>
            <li><a href="/info.html">ุฑุงูููุง</a></li>
            <li><a href="/security.html">ุงููุช</a></li>
            <li><a href="/deploy.html">ุฑุงูโุงูุฏุงุฒ</a></li>
        </ul>

        <div class="hero">
            <h1 class="hero-title">ุณุฑูุฑ ฺุช {{.MailDomain | cleanDomain}}</h1>
            <p class="hero-subtitle">
                ุณุฑูุฑ ุงุฎุชุตุงุต ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ <strong>ุฏูุชุงฺุช</strong>
                <br>
                ุงุฑุชุจุงุท ุงููุ ุณุฑุน ู ุฎุตูุต
            </p>
        </div>

        {{if .RegistrationOpen}}
        <div class="registration-methods">
            {{if .JitRegistrationEnabled}}
            <div class="registration-card registration-card-jit glass-card-interactive" onclick="MadmailApp.RegistrationFlow.generateJIT()">
                <div class="registration-card-icon">โก</div>
                <h3>ุงุฌุงุฏ ุงฺฉุงูุช ููุฑ</h3>
                <p>ุฏุฑุงูุช ุขู ุงฺฉุงูุช ุจุฏูู ูุงุฒ ุจู ุชุงุฏ ุณุฑูุฑ. ุงฺฉุงูุช ุฏุฑ ููู ูุญุธู ุฑู ุฏุณุชฺฏุงู ุดูุง ุณุงุฎุชู ูโุดูุฏ.</p>
                <button class="btn btn-success btn-lg" onclick="event.stopPropagation(); MadmailApp.RegistrationFlow.generateJIT()">
                    ุงุฌุงุฏ ููุฑ
                </button>
            </div>
            {{end}}

            <div class="registration-card glass-card-interactive" onclick="MadmailApp.RegistrationFlow.generateStandard()">
                <div class="registration-card-icon">๐</div>
                <h3>ุงุฌุงุฏ ุงฺฉุงูุช ุงุณุชุงูุฏุงุฑุฏ</h3>
                <p>ุฏุฑุงูุช ุงฺฉุงูุช ุงุฒ ุทุฑู ุณุฑูุฑ. ุงู ุฑูุด ุจุฑุง ููุงุฑุฏ ฺฉู ูุงุฒ ุจู ฺฉูุชุฑู ุจุดุชุฑ ุฏุงุฑุฏ ููุงุณุจ ุงุณุช.</p>
                <button class="btn btn-primary btn-lg" onclick="event.stopPropagation(); MadmailApp.RegistrationFlow.generateStandard()">
                    ุงุฌุงุฏ ุงุณุชุงูุฏุงุฑุฏ
                </button>
            </div>
        </div>

        <div id="loading-indicator" class="hidden text-center" style="margin: var(--spacing-xl) 0;">
            <div class="loading"></div>
            <p style="margin-top: var(--spacing-md); color: var(--text-secondary);">ุฏุฑ ุญุงู ุงุฌุงุฏ ุงฺฉุงูุช...</p>
        </div>

        <div id="error-message" class="alert alert-danger hidden"></div>

        <div id="deltachat-error" class="alert alert-warning hidden">
            <strong>ุฏูุชุงฺุช ูุตุจ ูุดุฏู ุงุณุช</strong>
            <p style="margin-top: var(--spacing-sm); font-size: 0.95rem;">
                ูุทูุงู ุงุจุชุฏุง ุงูพูฺฉุดู ุฏูุชุงฺุช ุฑุง ูุตุจ ฺฉูุฏ ู ุณูพุณ ุงุฒ ุฏฺฉูู "ฺฉูพ ููฺฉ" ุงุณุชูุงุฏู ฺฉูุฏ.
            </p>
        </div>

        <div id="account-result" class="hidden" style="margin-top: var(--spacing-xl);">
            <div class="glass-card text-center">
                <h3 style="margin-bottom: var(--spacing-lg);">ุงฺฉุงูุช ุดูุง ุขูุงุฏู ุงุณุช! ๐</h3>

                <div id="qr-container" class="hidden">
                    <div class="qr-container">
                        <img id="result-qr" width="250" alt="QR Code" />
                    </div>
                </div>

                <div style="display: flex; gap: var(--spacing-md); margin: var(--spacing-lg) 0; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="MadmailApp.RegistrationFlow.openDeltaChat()" id="open-deltachat-btn" disabled>
                        ูุฑูุฏ ุจู ุฏูุชุงฺุช
                    </button>
                    <button class="btn btn-ghost" onclick="MadmailApp.RegistrationFlow.copyLink()" id="copy-link-btn" disabled>
                        ฺฉูพ ููฺฉ
                    </button>
                </div>

                <div class="accordion" style="margin-top: var(--spacing-xl);">
                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>ุฑุงูููุง ุงูุฒูุฏู ุฏุณุช</strong>
                            <span class="accordion-icon">โผ</span>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body text-right">
                                <ol style="margin-right: var(--spacing-lg);">
                                    <li>ุฏุฑ ุฏูุชุงฺุช "ุงุฌุงุฏ ูพุฑููุงู ุฌุฏุฏ" (Create new profile) ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.</li>
                                    <li>ุณูพุณ "ุงุณุชูุงุฏู ุงุฒ ุณุฑูุฑ ุฏฺฏุฑ" (Use Other server) ุฑุง ุจุฒูุฏ.</li>
                                    <li>ุนุจุงุฑุช ุฒุฑ ุฑุง ฺฉูพ ฺฉุฑุฏู ู ุฏุฑ ุจุฎุด ุงุณฺฉู ฺฉุฏุ ฺฏุฒูู "ุฌุงฺฏุฐุงุฑ ุงุฒ ุญุงูุธู" (Paste from clipboard) ุฑุง ุจุฒูุฏ:</li>
                                </ol>
                                <div class="code-block" id="manual-link" data-copy onclick="MadmailApp.copyToClipboard(this.textContent)">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="accordion-item">
                        <div class="accordion-header">
                            <strong>ูฺฉุชู ูุฎุตูุต ฺฉุงุฑุจุฑุงู iOS (ุขููู)</strong>
                            <span class="accordion-icon">โผ</span>
                        </div>
                        <div class="accordion-content">
                            <div class="accordion-body text-right">
                                <p>ฺฉุงุฑุจุฑุงู ุขููู ุจุงุฏ ููฺฉ ุงุณุชุงูุฏุงุฑุฏ ุจุงูุง ุฑุง ฺฉูพ ฺฉุฑุฏู ู ุฏุฑ ููฺฏุงู ุณุงุฎุช ุงฺฉุงูุช ุฌุฏุฏ ุจู ุดฺฉู ุฒุฑ ุนูู ฺฉููุฏ:</p>
                                <div class="badge badge-primary" style="margin: var(--spacing-sm) 0;">
                                    new account > use other server > scan > paste
                                </div>
                                <p style="margin-top: var(--spacing-md);">
                                    ุงฺฏุฑฺู ฺฉูฺฉ ุฑู ุฏฺฉูู ูุฑูุฏ ุฏุฑ iOS ููฺฉู ุงุณุช ฺฉุงุฑ ฺฉูุฏุ ุงูุง ุจู ุฏูู ูุญุฏูุฏุชโูุง ุณุณุชูโุนุงููุ ุฑูุด ฺฉูพ ู ุฌุงฺฏุฐุงุฑ (Paste) ูพุดููุงุฏ ูโุดูุฏ.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        {{if .SSURL}}
        <div class="ss-prominent-box">
            <strong>๐ ุจุฑุง ุณุฑุนุช ุจุดุชุฑ ุงุฒ ูพุฑูฺฉุณ ุงุฎุชุตุงุต ุงุณุชูุงุฏู ฺฉูุฏ</strong>
            <p>ุงู ูพุฑูฺฉุณ ููุท ุจุฑุง ุงู ุณุฑูุฑ ู ููุท ุจุฑุง ูพุงูโุฑุณุงู ุจู ุงู ุณุฑูุฑ ูุงุจู ุงุณุชูุงุฏู ุงุณุช.</p>

            <div class="ss-copy-container">
                <p style="font-size: 0.9rem; color: var(--text-tertiary);">ููฺฉ ูพุฑูฺฉุณ Shadowsocks:</p>
                <div class="ss-copy-text" onclick="MadmailApp.copyToClipboard('{{.SSURL}}')">{{.SSURL}}</div>
            </div>

            <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: var(--spacing-md);">
                ูุญูู ุงุณุชูุงุฏู: ุชูุธูุงุช > ูพุดุฑูุชู > ุดุจฺฉู > ูพุฑูฺฉุณ SOCKS5
            </p>
        </div>
        {{end}}

        <div class="glass-card" style="margin-top: var(--spacing-2xl); text-align: center;">
            <h3>ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุขโุฏ</h3>
            <p style="margin-bottom: var(--spacing-lg);">
                ุดูุง ูโุชูุงูุฏ ุขโุฏ ุฏูุชุงฺุช ุฎูุฏ ุฑุง ุจู ุงุดุชุฑุงฺฉ ุจฺฏุฐุงุฑุฏ ุชุง ุฏฺฏุฑุงู ุจุชูุงููุฏ ุจุง ุดูุง ุชูุงุณ ุจฺฏุฑูุฏ.
            </p>
            <a href="/share" class="btn btn-secondary">ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุขโุฏ ูู</a>
        </div>

        <div class="feature-grid" style="margin-top: var(--spacing-2xl);">
            <div class="feature-card">
                <div class="feature-icon">๐</div>
                <h3>ุงููุช ฺฉุงูู</h3>
                <p>ุฑูุฒูฺฏุงุฑ End-to-End ุจุฑุง ุชูุงู ูพุงูโูุง</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">โก</div>
                <h3>ุณุฑุนุช ุจุงูุง</h3>
                <p>ุงุฑุณุงู ู ุฏุฑุงูุช ููุฑ ูพุงูโูุง</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">๐ก๏ธ</div>
                <h3>ุญุฑู ุฎุตูุต</h3>
                <p>ุจุฏูู ุฐุฎุฑู ุงุทูุงุนุงุช ุดุฎุต</p>
            </div>
        </div>

        {{else}}
        <div class="glass-card text-center" style="border-color: var(--danger); margin-top: var(--spacing-2xl);">
            <h2 style="color: var(--danger); margin-bottom: var(--spacing-lg);">ุซุจุชโูุงู ุจุณุชู ุดุฏู ุงุณุช</h2>
            <p style="font-size: 1.1rem; color: var(--text-secondary); line-height: 2;">
                ุซุจุชโูุงู ฺฉุงุฑุจุฑ ุฌุฏุฏ ุฏุฑ ุงู ุณุฑูุฑ ูููุชุงู ุบุฑูุนุงู ุดุฏู ุงุณุช.
                <br>
                ูุทูุงู ุงุฒ ุณุฑูุฑูุง ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ.
            </p>
        </div>
        {{end}}

        <footer>
            <p>
                ูุณุฎู {{.Version}} |
                <a href="/info.html">ุฏุฑุจุงุฑู ุณุฑูุฑ</a> |
                <a href="/security.html">ุงููุช</a>
            </p>
        </footer>
    </div>

    <script>
        MadmailApp.RegistrationFlow.init({
            mailDomain: "{{.MailDomain | cleanDomain}}",
            publicIP: "{{.PublicIP | cleanDomain}}",
            mxDomain: "{{.MXDomain | cleanDomain}}",
            turnOffTLS: {{if .TurnOffTLS}}true{{else}}false{{end}},
            registrationOpen: {{if .RegistrationOpen}}true{{else}}false{{end}},
            jitEnabled: {{if .JitRegistrationEnabled}}true{{else}}false{{end}}
        });
    </script>
</body>

</html>
