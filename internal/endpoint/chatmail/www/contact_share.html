<!DOCTYPE html>
<html dir="rtl" lang="fa">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุขโุฏ ุฏูุชุงฺุช - {{.WebDomain}}</title>
    <link rel="stylesheet" href="/main.css">
    <style>
        .form-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            padding: 40px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 500px;
            margin: 40px auto;
            text-align: right;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        input {
            width: 100%;
            padding: 14px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            box-sizing: border-box;
            direction: ltr;
        }

        input#name {
            direction: rtl;
        }

        input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(0, 210, 255, 0.2);
        }

        .help-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
    </style>
    <script src="./main.js"></script>
</head>

<body>
    <ul id="menu">
        <li><a href="/">ุงุตู</a></li>
        <li><a href="/share">ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ</a></li>
        <li><a href="/info.html">ุฑุงูููุง</a></li>
        <li><a href="/security.html">ุงููุช</a></li>
        <li><a href="/deploy.html">ุฑุงูโุงูุฏุงุฒ</a></li>
    </ul>

    <div style="text-align: center;">
        <h1>ุงุฌุงุฏ ููฺฉ ูุงุจู ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ</h1>
        <p>ุงุฌุงุฒู ุฏูุฏ ุฏฺฏุฑุงู ุจู ุฑุงุญุช ุฏุฑ ุฏูุชุงฺุช ุจุง ุดูุง ุชูุงุณ ุจฺฏุฑูุฏ.</p>
    </div>

    <div class="form-container">
        <form id="shareForm">
            <div class="form-group">
                <label for="name">ูุงู ุดูุง (ุงุฎุชุงุฑ)</label>
                <input type="text" id="name" name="name" placeholder="ูุซูุงู ุนู ุฑุถุง">
            </div>
            <div class="form-group">
                <label for="slug">ูุงู ูุณุฑ (ุงุฎุชุงุฑ)</label>
                <div style="display: flex; gap: 10px;">
                    <input type="text" id="slug" name="slug" placeholder="ูุซูุงู ali20" style="flex-grow: 1;"
                        pattern="[a-zA-Z0-9]+" title="ููุท ุญุฑูู ู ุงุนุฏุงุฏ ูุฌุงุฒ ุงุณุช">
                    <button type="button" onclick="generateRandomSlug()" class="copy-btn"
                        style="white-space: nowrap; font-size: 0.8rem; padding: 0 15px;">ุชุตุงุฏู</button>
                </div>
                <p class="help-text">ููุท ุญุฑูู ู ุงุนุฏุงุฏ (ูุซูุงู A231). ุขุฏุฑุณ ููุง: {{.WebDomain | cleanDomain}}/[ูุงู]</p>
            </div>
            <div class="form-group">
                <label for="url">ุขุฏุฑุณ ุฏุนูุช ุฏูุชุงฺุช ุดูุง</label>
                <input type="text" id="url" name="url" required placeholder="https://i.delta.chat/#...">
                <div
                    style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; margin-top: 10px; font-size: 0.85rem; line-height: 1.6;">
                    <strong style="color: var(--accent-color);">ูุญูู ูพุฏุง ฺฉุฑุฏู ููฺฉ ุฏุฑ ุงูพูฺฉุดู:</strong>
                    <ol style="margin: 8px 15px 0 0; padding: 0;">
                        <li>ูุงุฑุฏ <strong>ุชูุธูุงุช</strong> ุฏูุชุงฺุช ุดูุฏ.</li>
                        <li>ุฑู <strong>ุขฺฉูู QR ฺฉุฏ</strong> ุฏุฑ ุจุงูุง ุจุฒูุฏ.</li>
                        <li>ฺฏุฒูู <strong>ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ฺฉุฏ QR</strong> ุฑุง ุจุฒูุฏ.</li>
                        <li>ุณูพุณ <strong>ฺฉูพ ฺฉุฑุฏู ููฺฉ</strong> ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.</li>
                    </ol>
                    <p style="margin-top: 8px; color: var(--text-secondary); font-size: 0.8rem;">โ๏ธ ููุท ููฺฉโูุง ูุจ ฺฉู
                        ุจุง <code dir="ltr">https://i.delta.chat/#</code> ุดุฑูุน ูโุดููุฏ ฺฉุงุฑ ูโฺฉููุฏ.</p>
                </div>
            </div>
            <button type="submit" class="cta-button"
                style="width: 100%; border: none; cursor: pointer; font-family: inherit;">ุงุฌุงุฏ ููฺฉ</button>
        </form>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="modal">
        <div class="modal-content">
            <div class="error-popup" id="errorMessage">ุฎุทุง ุฑุฎ ุฏุงุฏ</div>
            <button onclick="closeModal()" class="cta-button" style="width: 100%; padding: 10px;">ูุชูุฌู ุดุฏู</button>
        </div>
    </div>

    {{if .SSURL}}
    <div class="ss-prominent-box">
        <strong>๐ ูุทูุง ุจุฑุง ุณุฑุนุช ุจุดุชุฑ ูพุงู ุฑุณุงู ุฏุงุฎู ุฎูุฏ ุงูพูฺฉุดู ุฏูุชุงฺุช ุงุฒ ุงู ูพุฑูฺฉุณ ุงุณุชูุงุฏู ฺฉูู.</strong>
        <p>ุชูุฌู ุฏุงุดุชู ุจุงุดู ฺฉู ุงู ูพุฑูฺฉุณ ููุท ุฏุฑ ุฏุงุฎู ููู ุณุฑูุฑ ู ููุท ุจุฑุง ูพุงู ุฑุณุงู ุจู ููู ุณุฑูุฑ ูุงุจู ุงุณุชูุงุฏู ุงุณุช! ูุฑ
            ุณุฑูุฑ ุฏฺฏุฑ madmail ูพุฑูฺฉุณ ุฎูุฏุด ุฑุง ุฎูุงูุฏ ุฏุงุดุช</p>

        <div class="ss-copy-container">
            <p>ููฺฉ ูพุฑูฺฉุณ Shadowsocks:</p>
            <div class="ss-copy-text" onclick="copyToClipboard('{{.SSURL}}')">{{.SSURL}}</div>
        </div>

        <p style="font-size: 0.85em; color: #bbb;">ูุญูู ุงุณุชูุงุฏู: ุชูุธูุงุช > ูพุดุฑูุชู > ุดุจฺฉู > ูพุฑูฺฉุณ SOCKS5</p>

        <p
            style="font-size: 0.75em; color: #888; margin-top: 15px; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
            * ุงู ูพุฑูฺฉุณ ูุฎุชุต ููู ุณุฑูุฑ Madmail ุงุณุช.
        </p>
    </div>
    {{end}}

    <div class="experimental" style="text-align: right;">
        <strong>ูฺฉุชู ุญุฑู ุฎุตูุต:</strong> ุขุฏุฑุณ ุฏุนูุช ุดูุง ุฏุฑ ูพุงฺฏุงู ุฏุงุฏู ูุง ุฐุฎุฑู ูโุดูุฏ ุชุง ุฏฺฏุฑุงู ุจุชูุงููุฏ ุจุง ุดูุง ุงุฑุชุจุงุท
        ุจุฑูุฑุงุฑ ฺฉููุฏ. ูุฑ ฺฉุณ ฺฉู ููฺฉ ุดูุง ุฑุง ุฏุงุดุชู ุจุงุดุฏ ูโุชูุงูุฏ ุงู ุงุทูุงุนุงุช ุฑุง ุจุจูุฏ.
    </div>

    <script>
        function generateRandomSlug() {
            const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('slug').value = result;
        }

        function closeModal() {
            document.getElementById('errorModal').style.display = 'none';
        }

        document.getElementById('shareForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const formData = new FormData(this);

            fetch('/share', {
                method: 'POST',
                body: formData
            }).then(response => {
                if (response.ok) {
                    return response.text().then(html => {
                        document.open();
                        document.write(html);
                        document.close();
                    });
                } else {
                    response.text().then(text => {
                        document.getElementById('errorMessage').innerText = text;
                        document.getElementById('errorModal').style.display = 'block';
                    });
                }
            }).catch(error => {
                document.getElementById('errorMessage').innerText = 'ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง ุณุฑูุฑ';
                document.getElementById('errorModal').style.display = 'block';
            });
        });
    </script>
</body>

</html>