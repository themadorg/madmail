<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¯Ø§Ù…Ù†Ù‡ Ùˆ TLS - {{.WebDomain | cleanDomain}}</title>
    <link rel="stylesheet" href="/main.css">
    <style>
        .doc-container {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            direction: rtl;
        }

        h2 {
            margin-top: 30px;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            display: inline-block;
        }

        h3 {
            margin-top: 25px;
            color: var(--accent-color);
        }

        .highlight {
            color: var(--accent-color);
            font-weight: bold;
        }

        .code-box {
            direction: ltr;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 16px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            text-align: left;
            margin: 10px 0;
            word-break: break-all;
            white-space: pre-wrap;
            border: 1px dashed #444;
            color: #ddd;
            line-height: 1.6;
        }

        .tip-box {
            background: rgba(0, 210, 255, 0.1);
            border-right: 4px solid #00d2ff;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warn-box {
            background: rgba(255, 180, 0, 0.1);
            border-right: 4px solid #ffb400;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .success-box {
            background: rgba(0, 200, 80, 0.1);
            border-right: 4px solid #00c850;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warn-box strong,
        .success-box strong {
            display: block;
            margin-bottom: 10px;
            color: var(--accent-color);
        }

        .warn-box ol,
        .warn-box ul,
        .success-box ul {
            padding-right: 25px;
            margin: 0;
        }

        .warn-box li,
        .success-box li {
            margin-bottom: 8px;
        }

        .inline-command {
            display: block;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 4px;
            margin-top: 5px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            width: fit-content;
        }

        .mode-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 25px 0;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            direction: rtl;
        }

        .mode-table th,
        .mode-table td {
            padding: 12px 15px;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .mode-table th {
            background: rgba(255, 255, 255, 0.05);
            color: var(--accent-color);
            font-size: 0.9em;
            font-weight: bold;
        }

        .mode-table tr:last-child td {
            border-bottom: none;
        }

        .mode-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .status-yes {
            background: rgba(0, 200, 80, 0.15);
            color: #00c850;
        }

        .status-no {
            background: rgba(255, 80, 80, 0.15);
            color: #ff5050;
        }

        .status-na {
            background: rgba(255, 255, 255, 0.1);
            color: #888;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .mode-card:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: var(--accent-color);
        }

        .code-box {
            margin-top: 0 !important;
            border-top-left-radius: 0 !important;
            border: 1px dashed #444 !important;
        }
    </style>
</head>

<body>
    <ul id="menu">
        <li><a href="/">Ø§ØµÙ„ÛŒ</a></li>
        <li><a href="/docs">Ù…Ø³ØªÙ†Ø¯Ø§Øª</a></li>
    </ul>

    <div class="doc-container">
        <h1>ğŸŒ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¯Ø§Ù…Ù†Ù‡ Ùˆ TLS</h1>

        <h2>Ù…Ø±Ø­Ù„Ù‡ Û±: ØªÙ†Ø¸ÛŒÙ… Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ DNS</h2>
        <p>Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ÛŒØ¯ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ DNS Ø²ÛŒØ± Ø±Ø§ Ø¯Ø± Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ù…Ù†Ù‡ Ø®ÙˆØ¯ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯:</p>

        <div class="dns-records">
            <span class="comment"># Ø±Ú©ÙˆØ±Ø¯ A â€” Ø§Ø´Ø§Ø±Ù‡ Ø¯Ø§Ù…Ù†Ù‡ Ø¨Ù‡ Ø¢ÛŒâ€ŒÙ¾ÛŒ Ø³Ø±ÙˆØ±</span><br>
            chat.example.org. A 203.0.113.50<br>
        </div>

        <div class="tip-box">
            <strong>Ù†Ú©ØªÙ‡:</strong> Ø¨Ø¹Ø¯ Ø§Ø² ØªÙ†Ø¸ÛŒÙ… Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ØŒ Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨ÛŒÙ† Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ ØªØ§ Û²Û´ Ø³Ø§Ø¹Øª Ø·ÙˆÙ„ Ø¨Ú©Ø´Ø¯ ØªØ§ ÙØ¹Ø§Ù„ Ø´ÙˆÙ†Ø¯.
            Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ ÙÙˆØ±ÛŒ: <code dir="ltr">dig +short chat.example.org A</code>
        </div>

        <h2>Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ù†ØªØ®Ø§Ø¨ Ø­Ø§Ù„Øª TLS</h2>
        <p>Madmail Ú†Ù‡Ø§Ø± Ø­Ø§Ù„Øª TLS Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¬Ø¯ÙˆÙ„ Ø²ÛŒØ± ØªÙØ§ÙˆØªâ€ŒÙ‡Ø§ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:</p>

        <table class="mode-table">
            <thead>
                <tr>
                    <th>Ø­Ø§Ù„Øª</th>
                    <th>Ú†Ø§Ù„Ø´</th>
                    <th>DNS API</th>
                    <th>Ù¾ÙˆØ±Øª 80</th>
                    <th>Ù‡Ø¯Ù</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td dir="ltr"><strong>autocert</strong></td>
                    <td dir="ltr">HTTP-01</td>
                    <td><span class="status-badge status-no">Ø®ÛŒØ±</span></td>
                    <td><span class="status-badge status-yes">Ù†ÛŒØ§Ø² Ø§Ø³Øª</span></td>
                    <td>Ø³Ø±ÙˆØ± Ø§ØµÙ„ÛŒ (ØªÙˆÙ„ÛŒØ¯)</td>
                </tr>
                <tr>
                    <td dir="ltr"><strong>acme</strong></td>
                    <td dir="ltr">DNS-01</td>
                    <td><span class="status-badge status-yes">Ø¨Ù„Ù‡</span></td>
                    <td><span class="status-badge status-no">Ø®ÛŒØ±</span></td>
                    <td>Ø³Ø±ÙˆØ± Ù¾Ø´Øª ÙØ§ÛŒØ±ÙˆØ§Ù„</td>
                </tr>
                <tr>
                    <td dir="ltr"><strong>file</strong></td>
                    <td dir="ltr">â€”</td>
                    <td><span class="status-badge status-na">â€”</span></td>
                    <td><span class="status-badge status-na">â€”</span></td>
                    <td>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ø¢Ù…Ø§Ø¯Ù‡</td>
                </tr>
                <tr>
                    <td dir="ltr"><strong>self_signed</strong></td>
                    <td dir="ltr">â€”</td>
                    <td><span class="status-badge status-na">â€”</span></td>
                    <td><span class="status-badge status-na">â€”</span></td>
                    <td>ØªØ³Øª Ùˆ ØªÙˆØ³Ø¹Ù‡</td>
                </tr>
            </tbody>
        </table>

        <div class="mode-card">
            <h3>ğŸ† Ø­Ø§Ù„Øª autocert <span class="badge badge-recommended">Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</span></h3>
            <div class="code-container">
                <div class="code-header">Ù†ØµØ¨ (Maddy Install)</div>
                <pre class="code-box">sudo maddy install \
  --domain chat.example.org \
  --tls-mode autocert \
  --acme-email admin@example.org \
  --enable-chatmail \
  --non-interactive</pre>
            </div>
            <p>Ø·Ø±Ø² Ú©Ø§Ø±:</p>
            <ol style="padding-right: 20px;">
                <li>Madmail ÛŒÚ© Ø³Ø±ÙˆØ± HTTP Ø±ÙˆÛŒ Ù¾ÙˆØ±Øª Û¸Û° Ø¨Ø±Ø§ÛŒ Ú†Ø§Ù„Ø´ ACME Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</li>
                <li>Let's Encrypt Ø¨Ø§ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¨Ù‡ Ù¾ÙˆØ±Øª Û¸Û°ØŒ Ù…Ø§Ù„Ú©ÛŒØª Ø¯Ø§Ù…Ù†Ù‡ Ø±Ø§ ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</li>
                <li>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ ØµØ§Ø¯Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ø§Ø¹ØªØ¨Ø§Ø± Û¹Û° Ø±ÙˆØ²ØŒ ØªÙ…Ø¯ÛŒØ¯ Ø®ÙˆØ¯Ú©Ø§Ø±)</li>
                <li>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ø¯Ø± <code>/var/lib/maddy/autocert/</code> Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
            </ol>

            <p>Ø¯Ø± ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª (maddy.conf):</p>
            <div class="code-container">
                <div class="code-header">maddy.conf</div>
                <pre class="code-box">tls {
    loader autocert {
        hostname chat.example.org
        email admin@example.org
        cache_dir /var/lib/maddy/autocert
        agreed
    }
}</pre>
            </div>
        </div>

        <div class="mode-card">
            <h3>ğŸ” Ø­Ø§Ù„Øª acme (DNS-01) <span class="badge badge-advanced">Ù¾ÛŒØ´Ø±ÙØªÙ‡</span></h3>
            <div class="code-container">
                <div class="code-header">Ù†ØµØ¨ (Maddy Install)</div>
                <pre class="code-box">sudo maddy install \
  --domain chat.example.org \
  --tls-mode acme \
  --acme-email admin@example.org \
  --acme-dns-provider cloudflare \
  --acme-dns-token "YOUR_CLOUDFLARE_TOKEN" \
  --enable-chatmail \
  --non-interactive</pre>
            </div>
            <p>Ø§Ø±Ø§Ø¦Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù† DNS Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒâ€ŒØ´Ø¯Ù‡: <code>cloudflare</code>, <code>gandi</code>,
                <code>digitalocean</code>, <code>vultr</code>, <code>hetzner</code>, <code>route53</code>
        </div>

        <div class="mode-card">
            <h3>ğŸ“„ Ø­Ø§Ù„Øª file (Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ù…ÙˆØ¬ÙˆØ¯)</h3>
            <div class="code-container">
                <div class="code-header">Ù†ØµØ¨ (Maddy Install)</div>
                <pre class="code-box">sudo maddy install \
  --domain chat.example.org \
  --tls-mode file \
  --cert-path /etc/letsencrypt/live/chat.example.org/fullchain.pem \
  --key-path /etc/letsencrypt/live/chat.example.org/privkey.pem \
  --enable-chatmail</pre>
            </div>

            <p>ÙØ±Ù…Øª ÙØ§ÛŒÙ„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª:</p>
            <div class="code-box">tls file /path/to/fullchain.pem /path/to/privkey.pem</div>

            <div class="tip-box">
                <strong>ØªÙ…Ø¯ÛŒØ¯:</strong> ÛŒÚ© hook Ø¯Ø± certbot ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ ØªØ§ Ø¨Ø¹Ø¯ Ø§Ø² ØªÙ…Ø¯ÛŒØ¯ØŒ maddy Ø±ÛŒØ³ØªØ§Ø±Øª Ø´ÙˆØ¯:
                <div class="code-box" style="margin-top: 5px;">systemctl restart maddy</div>
            </div>
        </div>

        <div class="mode-card">
            <h3>ğŸ§ª Ø­Ø§Ù„Øª self_signed (ØªØ³Øª)</h3>
            <div class="code-container">
                <div class="code-header">Ù†ØµØ¨ (Maddy Install)</div>
                <pre class="code-box">sudo maddy install \
  --simple --ip YOUR_SERVER_IP \
  --tls-mode self_signed \
  --turn-off-tls</pre>
            </div>
            <p>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ø¯Ø± <code>/var/lib/maddy/certs/</code> Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø¯Ø± Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øª Ø¨Ø¹Ø¯ÛŒ Ù…Ø¬Ø¯Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p>
        </div>

        <h2>Ù…Ø±Ø­Ù„Ù‡ Û³: Ø¨Ø±Ø±Ø³ÛŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡</h2>
        <p>Ø¨Ø¹Ø¯ Ø§Ø² Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒØŒ Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§ Ø§ÛŒÙ† Ø¯Ø³ØªÙˆØ± Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:</p>
        <div class="code-box">echo | openssl s_client -connect chat.example.org:443 \
            -servername chat.example.org 2>&1 | \
            openssl x509 -noout -subject -issuer -dates</div>

        <p>Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø§ÛŒØ¯ Ø´Ø¨ÛŒÙ‡ Ø§ÛŒÙ† Ø¨Ø§Ø´Ø¯:</p>
        <div class="code-box">subject=CN=chat.example.org
            issuer=C=US, O=Let's Encrypt, CN=E7
            notBefore=Feb 21 15:41:47 2026 GMT
            notAfter=May 22 15:41:46 2026 GMT</div>

        <h2>ØªØºÛŒÛŒØ± Ø­Ø§Ù„Øª TLS</h2>
        <h3>Ø§Ø² self_signed Ø¨Ù‡ autocert</h3>
        <div class="code-container">
            <div class="code-header">Ø­Ø°Ù Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¯ÛŒÙ…ÛŒ</div>
            <pre class="code-box">sudo rm /var/lib/maddy/certs/fullchain.pem /var/lib/maddy/certs/privkey.pem</pre>
        </div>

        <div class="code-container">
            <div class="code-header">Ù†ØµØ¨ Ù…Ø¬Ø¯Ø¯ Ø¨Ø§ autocert</div>
            <pre class="code-box">sudo maddy install \
  --domain chat.example.org \
  --tls-mode autocert \
  --acme-email admin@example.org \
  --enable-chatmail \
  --non-interactive</pre>
        </div>

        <div class="code-container">
            <div class="code-header">Ø§Ø¬Ø±Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</div>
            <pre class="code-box">sudo systemctl restart maddy</pre>
        </div>

        <h2>Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ</h2>

        <div class="warn-box">
            <strong>ğŸ”‘ file: Ø®Ø·Ø§ÛŒ Permission deniedØŸ</strong>
            <p>Ø¯Ø³ØªÙˆØ±Ø§Øª Ø²ÛŒØ± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ØµÙ„Ø§Ø­ Ù…Ø§Ù„Ú©ÛŒØª Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø§Ø¬Ø±Ø§ Ú©Ù†ÛŒØ¯:</p>
            <div class="code-container">
                <div class="code-header">Fix Permissions</div>
                <pre class="code-box">sudo chown root:maddy /path/to/cert.pem /path/to/key.pem
sudo chmod 640 /path/to/cert.pem /path/to/key.pem</pre>
            </div>
        </div>

        <div class="success-box">
            <strong>ğŸ›¡ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ:</strong>
            <ul>
                <li>Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø®ØµÙˆØµÛŒ Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ <code>600</code> (ÙÙ‚Ø· Ù…Ø§Ù„Ú©) Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                <li>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ <code>640</code> (Ù…Ø§Ù„Ú© + Ú¯Ø±ÙˆÙ‡) Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                <li>Ù¾ÙˆØ´Ù‡ Ú©Ø´ autocert Ø¨Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ <code>700</code> (ÙÙ‚Ø· Ù…Ø§Ù„Ú©) Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯</li>
                <li>Ú¯ÙˆØ§Ù‡ÛŒÙ†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Let's Encrypt Ø§Ø¹ØªØ¨Ø§Ø± Û¹Û° Ø±ÙˆØ²Ù‡ Ø¯Ø§Ø±Ù†Ø¯ Ùˆ Ø­Ø¯ÙˆØ¯ Û³Û° Ø±ÙˆØ² Ù‚Ø¨Ù„ Ø§Ø² Ø§Ù†Ù‚Ø¶Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ…Ø¯ÛŒØ¯
                    Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
            </ul>
        </div>

    </div>
</body>

</html>